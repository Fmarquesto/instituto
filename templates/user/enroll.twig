{% extends 'base/baseTemplate.twig' %}
{% block content %}
    {% for userCareer in userCareers %}
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        {{ userCareer.Carrera }}
                    </div>
                    <div class="panel-body">
                        <div class="panel-group" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" class="collapsed">Disponibles</a>
                                    </h4>
                                </div>
                                <div class="panel-collapse collapse" id="collapseOne" aria-expanded="false">
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered dt-responsive nowrap" id="availableSubjects" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Materia</th>
                                                    <th>Codigo</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" class="collapsed">No Disponibles</a>
                                    </h4>
                                </div>
                                <div class="panel-collapse collapse" id="collapseTwo" aria-expanded="false">
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered dt-responsive nowrap" id="nonAvailableSubjects" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Materia</th>
                                                    <th>Codigo</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" class="collapsed">Finalizadas</a>
                                    </h4>
                                </div>
                                <div class="panel-collapse collapse" id="collapseThree" aria-expanded="false">
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered dt-responsive nowrap" id="doneSubjects" careerId="{{ userCareer.id }}" width="100%">
                                                <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Materia</th>
                                                    <th>Codigo</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $( document ).ready(function() {
                loadSubjects()
            });

            function loadSubjects()
            {
                $.ajax({
                    url: "/user/enroll/"+$('#doneSubjects').attr('careerId'),
                }).done(function(msg) {
                    console.log(msg.DISPONIBLES);
                    $('#doneSubjects').dataTable( {
                        "destroy": true,
                        "language": {
                            "url": "{{ path_for('datatable.languaje') }}"
                        },
                        /*"sScrollX": "100%",
                         "sScrollXInner": "100%",*/
                        data: msg.APROBADAS,
                        "columns": [
                            {"data": "id"},
                            {"data": "name"},
                            {"data": "code"}
                        ]
                    } );


                    $('#nonAvailableSubjects').dataTable( {
                        "destroy": true,
                        "language": {
                            "url": "{{ path_for('datatable.languaje') }}"
                        },
                        data: msg.NODISPONIBLES,
                        "columns": [
                            {"data": "id"},
                            {"data": "name"},
                            {"data": "code"}
                        ]
                    } );

                    $('#availableSubjects').dataTable( {
                        "destroy": true,
                        "language": {
                            "url": "{{ path_for('datatable.languaje') }}"
                        },
                        data: msg.DISPONIBLES,
                        "columns": [
                            {"data": "id"},
                            {"data": "name"},
                            {"data": "code"}
                        ]
                    } );
                });
                return;


                /**/
            }
        </script>
    {% endfor %}
{% endblock %}